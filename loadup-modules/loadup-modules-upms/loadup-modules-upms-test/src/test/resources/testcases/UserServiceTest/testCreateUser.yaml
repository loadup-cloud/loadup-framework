variables:
  userId: "12345"
  userName: "${faker.name().firstName()}"
  email: test@example.com
  nowTime: ${time.now()}

input:
  - username: ${userName}
    password: 123456
    nickname: ${userName}
    email: test@example.com
    mobile: '13900000000'

setup:
  clean_sql: DELETE FROM upms_user WHERE id = '${userId}';
#  db_setup:
#    - table: users
#      data: # 模式 A：直接定义数据行
#        - user_id: ${userId}
#          user_name: "Admin"
#mocks:
#  # 场景1：基础 Mock，匹配任意入参，返回动态生成的随机数据
#  - bean: "orderService"
#    args:
#      - "${userName}"
#    method: "createOrder"
#    thenReturn:
#      orderId: "123456"
#      orderName: ${userName}

expect:
  #  exception:
  #    type: 'java.lang.IllegalArgumentException'
  #    message: 'User ID cannot be empty'
  # 预期响应结果
  response:
    username: '${userName}'
    mobile: '13900000000'

  database:
    table: upms_user
    mode: strict
    rows:
      - _match: { username: '${userName}' }
        username: ${userName}
        nickname: ${userName}
        status: 1
        created_at:
          op: approx
          val: ${nowTime}
