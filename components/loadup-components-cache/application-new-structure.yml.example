# ========================================
# LoadUp Cache Configuration - New Unified Structure
# ========================================
# This example demonstrates the new simplified configuration structure
# where common cache properties are in the API module and
# implementation-specific settings use Spring Boot's standard properties

# ========================================
# Redis Connection (Spring Boot Standard)
# ========================================
# Use Spring Boot's standard redis configuration
spring:
  redis:
    host: localhost
    port: 6379
    password: yourpassword
    database: 0
    timeout: 2000ms
    lettuce:
      pool:
        max-active: 8
        max-idle: 8
        min-idle: 0
        max-wait: -1ms

# ========================================
# LoadUp Cache Configuration
# ========================================
loadup:
  cache:
    # Global default binder
    binder: redis

    # Per-cache-name binder selection
    binders:
      userCache: redis        # Use Redis for user cache
      productCache: caffeine  # Use Caffeine for product cache
      sessionCache: redis     # Use Redis for session cache

    # Per-cache-name common configurations
    # These work across all cache implementations
    userCache:
      maximumSize: 10000
      expireAfterWrite: 30m
      enableRandomExpiration: true
      randomOffsetSeconds: 300
      cacheNullValues: true
      nullValueExpireAfterWrite: 5m
      priority: 8

    productCache:
      maximumSize: 5000
      expireAfterWrite: 1h
      enableRandomExpiration: true
      randomOffsetSeconds: 600
      priority: 5

    sessionCache:
      maximumSize: 50000
      expireAfterWrite: 24h
      enableRandomExpiration: true
      randomOffsetSeconds: 7200
      cacheNullValues: true
      priority: 10

# ========================================
# Example 2: All Caffeine (In-Memory)
# ========================================
# Use this for development or standalone applications
#spring:
#  cache:
#    caffeine:
#      spec: initialCapacity=1000,maximumSize=5000,expireAfterWrite=20m
#
#loadup:
#  cache:
#    binder: caffeine
#
#    userCache:
#      maximumSize: 10000
#      expireAfterWrite: 30m
#      enableRandomExpiration: true
#
#    productCache:
#      maximumSize: 5000
#      expireAfterWrite: 1h

# ========================================
# Example 3: Mixed Binders with Time Units
# ========================================
# Demonstrates various time unit formats
#loadup:
#  cache:
#    binder: redis  # Default to Redis
#
#    binders:
#      localCache: caffeine  # Override specific cache to use Caffeine
#
#    userCache:
#      expireAfterWrite: 30m   # 30 minutes
#
#    productCache:
#      expireAfterWrite: 2h    # 2 hours
#
#    orderCache:
#      expireAfterWrite: 1d    # 1 day
#
#    tempCache:
#      expireAfterWrite: 300s  # 300 seconds (5 minutes)

# ========================================
# Migration from Old Structure
# ========================================
# Old structure (still supported but deprecated):
# loadup.cache.redis.cache-config.userCache.expireAfterWrite=30m
# loadup.cache.caffeine.cache-config.productCache.maximumSize=5000
#
# New structure (recommended):
# loadup.cache.binders.userCache=redis
# loadup.cache.userCache.expireAfterWrite=30m
# loadup.cache.binders.productCache=caffeine
# loadup.cache.productCache.maximumSize=5000

