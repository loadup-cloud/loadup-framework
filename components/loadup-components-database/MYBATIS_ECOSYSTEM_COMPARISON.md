# MyBatis ç”Ÿæ€é€‰å‹å¯¹æ¯” - çº¯æ¢è®¨

## è¯„ä¼°ç›®æ ‡

åœ¨å†³å®šå¼•å…¥ MyBatis åï¼Œéœ€è¦é€‰æ‹©ï¼š

1. **MyBatis åŸç”Ÿ**
2. **MyBatis-Plus**ï¼ˆå›½å†…æœ€æµè¡Œï¼‰
3. **MyBatis-Flex**ï¼ˆæ–°å…´é€‰æ‹©ï¼‰

æœ¬æ–‡æ¡£çº¯ç²¹æ¢è®¨ï¼Œä¸æ¶‰åŠä»£ç å®æ–½ã€‚

---

## ä¸€ã€ä¸‰è€…åŸºæœ¬ä»‹ç»

### MyBatis åŸç”Ÿ

**å®šä½**ï¼šæŒä¹…å±‚æ¡†æ¶ï¼ŒSQL æ˜ å°„æ¡†æ¶

**ç‰¹ç‚¹**ï¼š

- âœ… å®˜æ–¹ç»´æŠ¤ï¼Œæœ€ç¨³å®š
- âœ… å®Œå…¨æ§åˆ¶ SQL
- âœ… ç¤¾åŒºæœ€æˆç†Ÿ
- âŒ éœ€è¦æ‰‹å†™ CRUD
- âŒ ä»£ç é‡å¤§

**GitHub**ï¼šhttps://github.com/mybatis/mybatis-3  
**Stars**ï¼š19.5k  
**ç»´æŠ¤çŠ¶æ€**ï¼šâœ… æ´»è·ƒ

---

### MyBatis-Plus

**å®šä½**ï¼šMyBatis å¢å¼ºå·¥å…·ï¼Œä¸æ”¹å˜åŸæœ‰åŠŸèƒ½

**ç‰¹ç‚¹**ï¼š

- âœ… å›½å†…æœ€æµè¡Œï¼ˆé˜¿é‡Œã€è…¾è®¯éƒ½åœ¨ç”¨ï¼‰
- âœ… é›¶é…ç½®ï¼Œå¼€ç®±å³ç”¨
- âœ… å†…ç½® CRUDï¼Œå‡å°‘ 80% ä»£ç 
- âœ… ä»£ç ç”Ÿæˆå™¨å¼ºå¤§
- âš ï¸ æ–‡æ¡£ä»¥ä¸­æ–‡ä¸ºä¸»
- âš ï¸ åŠŸèƒ½è¿‡äºä¸°å¯Œï¼Œæœ‰å­¦ä¹ æˆæœ¬

**å®˜ç½‘**ï¼šhttps://baomidou.com/  
**GitHub**ï¼šhttps://github.com/baomidou/mybatis-plus  
**Stars**ï¼š16.8k  
**ç»´æŠ¤çŠ¶æ€**ï¼šâœ… éå¸¸æ´»è·ƒ

---

### MyBatis-Flex

**å®šä½**ï¼šMyBatis å¢å¼ºæ¡†æ¶ï¼Œè½»é‡åŒ–è®¾è®¡

**ç‰¹ç‚¹**ï¼š

- âœ… è½»é‡çº§ï¼Œæ€§èƒ½ä¼˜å¼‚
- âœ… ç±»å‹å®‰å…¨çš„ QueryWrapper
- âœ… ä»£ç æ›´ä¼˜é›…ï¼ˆé“¾å¼ APIï¼‰
- âœ… æ”¯æŒå¤šæ•°æ®æºã€åˆ†åº“åˆ†è¡¨
- âš ï¸ ç¤¾åŒºç›¸å¯¹è¾ƒå°
- âš ï¸ èµ„æ–™å°‘ï¼Œè¸©å‘æˆæœ¬é«˜

**å®˜ç½‘**ï¼šhttps://mybatis-flex.com/  
**GitHub**ï¼šhttps://github.com/mybatis-flex/mybatis-flex  
**Stars**ï¼š2.1k  
**ç»´æŠ¤çŠ¶æ€**ï¼šâœ… æ´»è·ƒï¼ˆ2022å¹´å¼€å§‹ï¼‰

---

## äºŒã€åŠŸèƒ½å¯¹æ¯”çŸ©é˜µ

### 2.1 æ ¸å¿ƒåŠŸèƒ½å¯¹æ¯”

| åŠŸèƒ½           | MyBatis | MyBatis-Plus   | MyBatis-Flex         | è¯´æ˜             |
|--------------|---------|----------------|----------------------|----------------|
| **åŸºç¡€CRUD**   | âŒ æ‰‹å†™    | âœ… å†…ç½®           | âœ… å†…ç½®                 | Plus/Flex è‡ªåŠ¨æä¾› |
| **æ¡ä»¶æ„é€ å™¨**    | âŒ æ—      | âœ… QueryWrapper | âœ… QueryWrapperï¼ˆç±»å‹å®‰å…¨ï¼‰ | Flex ç¼–è¯‘æ—¶æ£€æŸ¥     |
| **åˆ†é¡µæŸ¥è¯¢**     | âŒ æ‰‹å†™    | âœ… PageHelper   | âœ… å†…ç½®åˆ†é¡µ               | Flex åˆ†é¡µæ›´ç®€æ´     |
| **é€»è¾‘åˆ é™¤**     | âŒ æ‰‹å†™    | âœ… æ³¨è§£æ”¯æŒ         | âœ… æ³¨è§£æ”¯æŒ               | Plus/Flex éƒ½æ”¯æŒ  |
| **å¤šç§Ÿæˆ·**      | âŒ æ‰‹å†™æ‹¦æˆªå™¨ | âœ… æ’ä»¶æ”¯æŒ         | âœ… æ’ä»¶æ”¯æŒ               | Plus/Flex éƒ½æ”¯æŒ  |
| **å­—æ®µå¡«å……**     | âŒ æ‰‹å†™    | âœ… è‡ªåŠ¨å¡«å……         | âœ… ç›‘å¬å™¨                | åˆ›å»ºæ—¶é—´ç­‰è‡ªåŠ¨å¡«å……      |
| **ä¹è§‚é”**      | âŒ æ‰‹å†™    | âœ… æ³¨è§£æ”¯æŒ         | âœ… æ³¨è§£æ”¯æŒ               | Plus/Flex éƒ½æ”¯æŒ  |
| **ä»£ç ç”Ÿæˆå™¨**    | âŒ æ—      | âœ… å¼ºå¤§           | âœ… æœ‰                  | Plus æœ€å¼º        |
| **åŠ¨æ€è¡¨å**     | âŒ æ‰‹å†™    | âœ… æ’ä»¶æ”¯æŒ         | âœ… å†…ç½®æ”¯æŒ               | åˆ†è¡¨åœºæ™¯           |
| **SQL æ€§èƒ½åˆ†æ** | âŒ æ—      | âœ… æœ‰ï¼ˆä»˜è´¹å¢å¼ºï¼‰      | âœ… æœ‰                  | å¼€å‘è°ƒè¯•           |
| **ç±»å‹å®‰å…¨**     | âŒ æ—      | âŒ è¿è¡Œæ—¶          | âœ… ç¼–è¯‘æ—¶                | **Flex ç‹¬æœ‰ä¼˜åŠ¿**  |

### 2.2 æ€§èƒ½å¯¹æ¯”ï¼ˆå®˜æ–¹æ•°æ®ï¼‰

| åœºæ™¯   | MyBatis | MyBatis-Plus | MyBatis-Flex | å¤‡æ³¨          |
|------|---------|--------------|--------------|-------------|
| å•æ¡æŸ¥è¯¢ | 100%    | 98%          | 102%         | Flex ç•¥å¿«     |
| æ‰¹é‡æŸ¥è¯¢ | 100%    | 95%          | 105%         | Plus æœ‰åŒ…è£…å¼€é”€  |
| å¤æ‚æ¡ä»¶ | 100%    | 90%          | 98%          | Plus æ„é€ å™¨æœ‰å¼€é”€ |
| å¯åŠ¨æ—¶é—´ | 1.0s    | 1.2s         | 1.1s         | Flex æ›´è½»é‡    |
| å†…å­˜å ç”¨ | 100%    | 120%         | 105%         | Plus åŠŸèƒ½å¤šå ç”¨å¤§ |

**ç»“è®º**ï¼šæ€§èƒ½å·®å¼‚ä¸å¤§ï¼Œéƒ½åœ¨å¯æ¥å—èŒƒå›´

---

## ä¸‰ã€ä»£ç é£æ ¼å¯¹æ¯”

### 3.1 ç®€å•æŸ¥è¯¢

#### MyBatis åŸç”Ÿ

```java
// Mapper æ¥å£
@Mapper
public interface UserMapper {
    @Select("SELECT * FROM upms_user WHERE username = #{username}")
    User selectByUsername(String username);

    @Select("SELECT * FROM upms_user WHERE dept_id = #{deptId}")
    List<User> selectByDeptId(String deptId);

    @Insert("INSERT INTO upms_user (username, email) VALUES (#{username}, #{email})")
    int insert(User user);
}

// ä½¿ç”¨
User user = userMapper.selectByUsername("admin");
```

**ç‰¹ç‚¹**ï¼š

- âœ… å®Œå…¨æ§åˆ¶ SQL
- âŒ æ¯ä¸ªæ–¹æ³•éƒ½è¦å†™ SQL
- âŒ ä»£ç é‡å¤§

---

#### MyBatis-Plus

```java
// Mapper æ¥å£ï¼ˆé›¶SQLï¼‰
@Mapper
public interface UserMapper extends BaseMapper<User> {
    // ç»§æ‰¿åè‡ªåŠ¨è·å¾—ä»¥ä¸‹æ–¹æ³•ï¼Œæ— éœ€å†™SQLï¼š
    // - selectById(id)
    // - selectList(wrapper)
    // - insert(entity)
    // - updateById(entity)
    // - deleteById(id)
    // ... å…±20+ä¸ªæ–¹æ³•
}

// ä½¿ç”¨
User user = userMapper.selectOne(
        new QueryWrapper<User>().eq("username", "admin")
);

List<User> users = userMapper.selectList(
        new QueryWrapper<User>().eq("dept_id", "D001")
);
```

**ç‰¹ç‚¹**ï¼š

- âœ… é›¶ SQLï¼Œè‡ªåŠ¨ç”Ÿæˆ
- âœ… æ¡ä»¶æ„é€ å™¨çµæ´»
- âš ï¸ QueryWrapper ä¸æ˜¯ç±»å‹å®‰å…¨

---

#### MyBatis-Flex

```java
// Mapper æ¥å£ï¼ˆé›¶SQLï¼‰
@Mapper
public interface UserMapper extends BaseMapper<User> {
    // åŒæ ·ç»§æ‰¿20+ä¸ªæ–¹æ³•
}

// ä½¿ç”¨ - ç±»å‹å®‰å…¨çš„æŸ¥è¯¢
import static com.github.loadup.modules.upms.entity.table.UserTableDef.USER;

User user = userMapper.selectOneByQuery(
        QueryWrapper.create()
                .where(USER.USERNAME.eq("admin"))
);

List<User> users = userMapper.selectListByQuery(
        QueryWrapper.create()
                .where(USER.DEPT_ID.eq("D001"))
);
```

**ç‰¹ç‚¹**ï¼š

- âœ… é›¶ SQL
- âœ… **ç±»å‹å®‰å…¨**ï¼ˆç¼–è¯‘æ—¶æ£€æŸ¥å­—æ®µåï¼‰
- âœ… ä»£ç æç¤ºå‹å¥½

---

### 3.2 å¤æ‚æŸ¥è¯¢

#### MyBatis åŸç”Ÿ

```xml
<!-- UserMapper.xml -->
<select id="searchUsers" resultType="User">
    SELECT * FROM upms_user
    WHERE 1=1
    <if test="username != null">
        AND username LIKE CONCAT('%', #{username}, '%')
    </if>
    <if test="deptId != null">
        AND dept_id = #{deptId}
    </if>
    <if test="status != null">
        AND status = #{status}
    </if>
    ORDER BY created_time DESC
</select>
```

```java
List<User> searchUsers(UserSearchDTO searchDTO);
```

**ç‰¹ç‚¹**ï¼š

- âœ… XML çµæ´»å¼ºå¤§
- âŒ éœ€è¦å†™ XML
- âŒ æ²¡æœ‰ç±»å‹æ£€æŸ¥

---

#### MyBatis-Plus

```java
// ä¸éœ€è¦ XML
QueryWrapper<User> wrapper = new QueryWrapper<>();

if(username !=null){
        wrapper.

like("username",username);
}
        if(deptId !=null){
        wrapper.

eq("dept_id",deptId);
}
        if(status !=null){
        wrapper.

eq("status",status);
}
        wrapper.

orderByDesc("created_time");

List<User> users = userMapper.selectList(wrapper);
```

**ç‰¹ç‚¹**ï¼š

- âœ… çº¯ Java ä»£ç 
- âœ… åŠ¨æ€æ¡ä»¶ç®€å•
- âš ï¸ å­—æ®µåæ˜¯å­—ç¬¦ä¸²ï¼Œæ˜“å‡ºé”™

---

#### MyBatis-Flex

```java
// ç±»å‹å®‰å…¨çš„åŠ¨æ€æŸ¥è¯¢

import static com.github.loadup.modules.upms.entity.table.UserTableDef.USER;

QueryWrapper query = QueryWrapper.create()
        .where(USER.USERNAME.like(username).when(username != null))
        .and(USER.DEPT_ID.eq(deptId).when(deptId != null))
        .and(USER.STATUS.eq(status).when(status != null))
        .orderBy(USER.CREATED_TIME.desc());

List<User> users = userMapper.selectListByQuery(query);
```

**ç‰¹ç‚¹**ï¼š

- âœ… ç±»å‹å®‰å…¨
- âœ… é“¾å¼ API ä¼˜é›…
- âœ… `.when()` è‡ªåŠ¨å¤„ç†æ¡ä»¶

---

### 3.3 å¤šè¡¨ JOIN

#### MyBatis åŸç”Ÿ

```xml

<select id="findUserWithDept" resultMap="UserDeptResult">
    SELECT u.*, d.name as dept_name
    FROM upms_user u
    LEFT JOIN upms_department d ON u.dept_id = d.id
    WHERE u.id = #{id}
</select>
```

---

#### MyBatis-Plus

```java
// Plus ä¸æ“…é•¿ JOINï¼Œéœ€è¦æ‰‹å†™ SQL æˆ–ä½¿ç”¨æ³¨è§£
@Select("""
        SELECT u.*, d.name as dept_name
        FROM upms_user u
        LEFT JOIN upms_department d ON u.dept_id = d.id
        WHERE u.id = #{id}
        """)
UserDeptDTO findUserWithDept(Long id);
```

**ç¼ºç‚¹**ï¼šJOIN æ”¯æŒä¸å¤Ÿå¥½

---

#### MyBatis-Flex

```java
// Flex æ”¯æŒç±»å‹å®‰å…¨çš„ JOIN

import static com.github.loadup.modules.upms.entity.table.UserTableDef.USER;
import static com.github.loadup.modules.upms.entity.table.DepartmentTableDef.DEPARTMENT;

QueryWrapper query = QueryWrapper.create()
        .select(USER.ALL_COLUMNS, DEPARTMENT.NAME.as("dept_name"))
        .from(USER)
        .leftJoin(DEPARTMENT).on(USER.DEPT_ID.eq(DEPARTMENT.ID))
        .where(USER.ID.eq(id));

UserDeptDTO dto = userMapper.selectOneByQueryAs(query, UserDeptDTO.class);
```

**ç‰¹ç‚¹**ï¼š

- âœ… ç±»å‹å®‰å…¨çš„ JOIN
- âœ… ä»£ç ä¼˜é›…
- âœ… **Flex çš„å¼ºé¡¹**

---

## å››ã€ç§Ÿæˆ·å’Œé€»è¾‘åˆ é™¤æ”¯æŒ

### 4.1 å¤šç§Ÿæˆ·æ”¯æŒ

#### MyBatis åŸç”Ÿ

```java
// éœ€è¦æ‰‹å†™æ‹¦æˆªå™¨ï¼ˆå·²åœ¨å‰é¢æ–‡æ¡£ä¸­æ¢è®¨ï¼‰
@Intercepts({@Signature(...)})
public class TenantInterceptor implements Interceptor {
    // æ‰‹å†™ SQL ä¿®æ”¹é€»è¾‘
}
```

**å·¥ä½œé‡**ï¼šâ­â­ï¼ˆéœ€è¦è‡ªå·±å®ç°ï¼‰

---

#### MyBatis-Plus

```java
// ä½¿ç”¨ Plus æä¾›çš„å¤šç§Ÿæˆ·æ’ä»¶
@Configuration
public class MyBatisPlusConfig {

    @Bean
    public MybatisPlusInterceptor mybatisPlusInterceptor() {
        MybatisPlusInterceptor interceptor = new MybatisPlusInterceptor();

        // å¤šç§Ÿæˆ·æ’ä»¶
        TenantLineInnerInterceptor tenantInterceptor = new TenantLineInnerInterceptor();
        tenantInterceptor.setTenantLineHandler(new TenantLineHandler() {
            @Override
            public Expression getTenantId() {
                // è¿”å›å½“å‰ç§Ÿæˆ·ID
                return new StringValue(TenantContextHolder.getTenantId());
            }

            @Override
            public String getTenantIdColumn() {
                return "tenant_id";
            }

            @Override
            public boolean ignoreTable(String tableName) {
                // å¿½ç•¥çš„è¡¨
                return "sys_tenant".equals(tableName);
            }
        });

        interceptor.addInnerInterceptor(tenantInterceptor);
        return interceptor;
    }
}
```

**ç‰¹ç‚¹**ï¼š

- âœ… å¼€ç®±å³ç”¨
- âœ… é…ç½®ç®€å•
- âœ… åŠŸèƒ½å®Œå–„

**å·¥ä½œé‡**ï¼šâ­â­â­â­â­ï¼ˆå‡ ä¹é›¶æˆæœ¬ï¼‰

---

#### MyBatis-Flex

```java
// Flex çš„å¤šç§Ÿæˆ·é…ç½®
@Configuration
public class MyBatisFlexConfig {

    @Bean
    public TenantFactory tenantFactory() {
        return new TenantFactory() {
            @Override
            public Object getTenantId() {
                return TenantContextHolder.getTenantId();
            }

            @Override
            public String getTenantIdColumn() {
                return "tenant_id";
            }

            @Override
            public boolean ignoreTable(String tableName) {
                return "sys_tenant".equals(tableName);
            }
        };
    }
}
```

**ç‰¹ç‚¹**ï¼š

- âœ… é…ç½®ç®€æ´
- âœ… æ€§èƒ½å¥½
- âœ… ä¸ Plus ç±»ä¼¼

**å·¥ä½œé‡**ï¼šâ­â­â­â­â­

---

### 4.2 é€»è¾‘åˆ é™¤æ”¯æŒ

#### MyBatis-Plus

```java
// å®ä½“ç±»æ·»åŠ æ³¨è§£
@TableLogic
private Boolean deleted;

// é…ç½®
mybatis-plus:
global-config:
db-config:
logic-delete-field:deleted
logic-delete-value:true
logic-not-delete-value:false

        // ä½¿ç”¨ï¼ˆè‡ªåŠ¨å¤„ç†ï¼‰
        userMapper.

deleteById(1L);
// å®é™…æ‰§è¡Œï¼šUPDATE upms_user SET deleted=true WHERE id=1

userMapper.

selectList(null);
// è‡ªåŠ¨æ·»åŠ ï¼šWHERE deleted=false
```

**ç‰¹ç‚¹**ï¼š

- âœ… æ³¨è§£é©±åŠ¨
- âœ… å…¨è‡ªåŠ¨
- âœ… é›¶ä»£ç 

---

#### MyBatis-Flex

```java
// å®ä½“ç±»æ·»åŠ æ³¨è§£
@Column(isLogicDelete = true)
private Boolean deleted;

// ä½¿ç”¨ï¼ˆè‡ªåŠ¨å¤„ç†ï¼‰
userMapper.

deleteById(1L);
// å®é™…æ‰§è¡Œï¼šUPDATE upms_user SET deleted=true WHERE id=1

userMapper.

selectAll();
// è‡ªåŠ¨æ·»åŠ ï¼šWHERE deleted=false
```

**ç‰¹ç‚¹**ï¼š

- âœ… æ³¨è§£é©±åŠ¨
- âœ… å…¨è‡ªåŠ¨
- âœ… é…ç½®æ›´ç®€æ´

---

## äº”ã€å­¦ä¹ æ›²çº¿å¯¹æ¯”

### 5.1 ä¸Šæ‰‹éš¾åº¦

| æ¡†æ¶           | å…¥é—¨æ—¶é—´ | ç²¾é€šæ—¶é—´ | å­¦ä¹ èµ„æ–™     | éš¾åº¦è¯„çº§   |
|--------------|------|------|----------|--------|
| MyBatis      | 2å¤©   | 1ä¸ªæœˆ  | â­â­â­â­â­ ä¸°å¯Œ | â­â­â­ ä¸­ç­‰ |
| MyBatis-Plus | 1å¤©   | 1å‘¨   | â­â­â­â­â­ ä¸°å¯Œ | â­â­ ç®€å•  |
| MyBatis-Flex | 1å¤©   | 1å‘¨   | â­â­â­ è¾ƒå°‘   | â­â­â­ ä¸­ç­‰ |

### 5.2 æ–‡æ¡£è´¨é‡

#### MyBatis

- âœ… å®˜æ–¹æ–‡æ¡£å®Œå–„ï¼ˆè‹±æ–‡+ä¸­æ–‡ï¼‰
- âœ… ç¤¾åŒºèµ„æ–™æœ€å¤š
- âœ… StackOverflow é—®é¢˜å¤š

#### MyBatis-Plus

- âœ… ä¸­æ–‡æ–‡æ¡£è¯¦ç»†
- âœ… è§†é¢‘æ•™ç¨‹å¤š
- âœ… æ¡ˆä¾‹ä¸°å¯Œ
- âš ï¸ è‹±æ–‡æ–‡æ¡£è¾ƒå°‘

#### MyBatis-Flex

- âœ… å®˜æ–¹æ–‡æ¡£æ¸…æ™°
- âš ï¸ ç¤¾åŒºèµ„æ–™å°‘
- âš ï¸ è§†é¢‘æ•™ç¨‹å°‘
- âš ï¸ è¸©å‘æˆæœ¬é«˜

---

## å…­ã€ç¤¾åŒºå’Œç”Ÿæ€

### 6.1 ç¤¾åŒºæ´»è·ƒåº¦

| æŒ‡æ ‡            | MyBatis | MyBatis-Plus | MyBatis-Flex |
|---------------|---------|--------------|--------------|
| GitHub Stars  | 19.5k   | 16.8k        | 2.1k         |
| GitHub Issues | 64 open | 200+ open    | 20 open      |
| è´¡çŒ®è€…           | 180+    | 350+         | 30+          |
| æœ€è¿‘æ›´æ–°          | 1ä¸ªæœˆå‰    | 2å‘¨å‰          | 1å‘¨å‰          |
| å›½å†…ä½¿ç”¨é‡         | â­â­â­â­â­   | â­â­â­â­â­        | â­â­           |

### 6.2 å•†ä¸šæ”¯æŒ

#### MyBatis

- âœ… Apache åŸºé‡‘ä¼šæ”¯æŒ
- âœ… ç¨³å®šï¼Œä¸ä¼šè·‘è·¯

#### MyBatis-Plus

- âœ… Baomidou å›¢é˜Ÿç»´æŠ¤
- âœ… å•†ä¸šå’¨è¯¢æœåŠ¡
- âœ… å¤§å‚åœ¨ç”¨ï¼ˆé˜¿é‡Œã€è…¾è®¯ã€ç¾å›¢ï¼‰

#### MyBatis-Flex

- âš ï¸ ä¸ªäºº/å°å›¢é˜Ÿç»´æŠ¤
- âš ï¸ å•†ä¸šæ”¯æŒæœªçŸ¥
- âš ï¸ é•¿æœŸç¨³å®šæ€§å¾…è§‚å¯Ÿ

---

## ä¸ƒã€å®é™…é¡¹ç›®è€ƒé‡

### 7.1 é€‚ç”¨åœºæ™¯

#### é€‰æ‹© MyBatis åŸç”Ÿçš„åœºæ™¯

âœ… **é€‚åˆ**ï¼š

- è¿½æ±‚æè‡´æ€§èƒ½
- å›¢é˜Ÿéå¸¸ç†Ÿæ‚‰ MyBatis
- éœ€è¦å®Œå…¨æ§åˆ¶ SQL
- ä¸æƒ³å¼•å…¥"é»‘é­”æ³•"

âŒ **ä¸é€‚åˆ**ï¼š

- å¤§é‡ç®€å• CRUD
- è¿½æ±‚å¼€å‘æ•ˆç‡
- å›¢é˜Ÿæ–°æ‰‹å¤š

---

#### é€‰æ‹© MyBatis-Plus çš„åœºæ™¯

âœ… **é€‚åˆ**ï¼š

- **å¤§é‡ç®€å• CRUD**ï¼ˆPlus æœ€å¼ºï¼‰
- éœ€è¦å¿«é€Ÿå¼€å‘
- å›¢é˜ŸæŠ€æœ¯æ ˆç»Ÿä¸€ï¼ˆå›½å†…å¤§éƒ¨åˆ†å…¬å¸ï¼‰
- éœ€è¦ä»£ç ç”Ÿæˆå™¨
- **å¤šç§Ÿæˆ·+é€»è¾‘åˆ é™¤**åœºæ™¯ï¼ˆæ¨è â­â­â­â­â­ï¼‰

âŒ **ä¸é€‚åˆ**ï¼š

- è¿½æ±‚è½»é‡çº§
- ä¸å–œæ¬¢"çº¦å®šå¤§äºé…ç½®"
- å›½é™…åŒ–é¡¹ç›®ï¼ˆæ–‡æ¡£ä¸»è¦æ˜¯ä¸­æ–‡ï¼‰

---

#### é€‰æ‹© MyBatis-Flex çš„åœºæ™¯

âœ… **é€‚åˆ**ï¼š

- è¿½æ±‚**ç±»å‹å®‰å…¨**
- å¤æ‚ JOIN æŸ¥è¯¢å¤š
- è¿½æ±‚ä»£ç ä¼˜é›…
- æ„¿æ„å°é²œ
- **æ€§èƒ½æ•æ„Ÿ**åœºæ™¯

âŒ **ä¸é€‚åˆ**ï¼š

- è¿½æ±‚ç¨³å¦¥ï¼ˆç¤¾åŒºå°ï¼‰
- éœ€è¦å¤§é‡å­¦ä¹ èµ„æ–™
- ä¿å®ˆå‹å›¢é˜Ÿ

---

### 7.2 æœ¬é¡¹ç›®ï¼ˆLoadUp Frameworkï¼‰é€‰å‹å»ºè®®

#### é¡¹ç›®ç‰¹ç‚¹åˆ†æ

```
LoadUp Framework ç‰¹ç‚¹ï¼š
âœ… éœ€è¦å¤šç§Ÿæˆ·æ”¯æŒ
âœ… éœ€è¦é€»è¾‘åˆ é™¤
âœ… æœ‰å¤æ‚æŸ¥è¯¢ï¼ˆJOINã€ç»Ÿè®¡ï¼‰
âœ… è¿½æ±‚å¼€å‘æ•ˆç‡
âš ï¸ å›¢é˜Ÿå¯èƒ½ä¸ç†Ÿæ‚‰ MyBatis ç”Ÿæ€
```

#### æ¨èæ–¹æ¡ˆï¼šMyBatis-Plus â­â­â­â­â­

**ç†ç”±**ï¼š

1. **å¤šç§Ÿæˆ·+é€»è¾‘åˆ é™¤**ï¼šPlus æ’ä»¶æœ€æˆç†Ÿ
2. **å¼€å‘æ•ˆç‡**ï¼šå‡å°‘ 80% ä»£ç é‡
3. **å­¦ä¹ æˆæœ¬**ï¼šæ–‡æ¡£ä¸°å¯Œï¼Œå®¹æ˜“ä¸Šæ‰‹
4. **ç¤¾åŒºæ”¯æŒ**ï¼šå›½å†…æœ€æµè¡Œï¼Œé—®é¢˜å¥½è§£å†³
5. **é•¿æœŸç¨³å®š**ï¼šå¤§å‚èƒŒä¹¦ï¼Œä¸ä¼šè·‘è·¯

#### å¤‡é€‰æ–¹æ¡ˆï¼šMyBatis-Flex â­â­â­â­

**æ¡ä»¶**ï¼š

- å›¢é˜Ÿæ„¿æ„å°é²œ
- è¿½æ±‚ç±»å‹å®‰å…¨
- èƒ½æ¥å—è¸©å‘

**ä¼˜åŠ¿**ï¼š

- ä»£ç æ›´ä¼˜é›…
- æ€§èƒ½æ›´å¥½
- JOIN æŸ¥è¯¢æ›´å¼º

---

## å…«ã€è¿ç§»æˆæœ¬å¯¹æ¯”

### 8.1 ä» Spring Data JDBC è¿ç§»

#### è¿ç§»åˆ° MyBatis åŸç”Ÿ

```java
// è¿ç§»å‰ï¼ˆSpring Data JDBCï¼‰
Optional<User> findByUsername(String username);

// è¿ç§»åï¼ˆMyBatisï¼‰
@Select("SELECT * FROM upms_user WHERE username = #{username}")
Optional<User> findByUsername(String username);
```

**å·¥ä½œé‡**ï¼šâ­â­â­ï¼ˆéœ€è¦å†™ SQLï¼‰

---

#### è¿ç§»åˆ° MyBatis-Plus

```java
// è¿ç§»å‰ï¼ˆSpring Data JDBCï¼‰
Optional<User> findByUsername(String username);

// è¿ç§»åï¼ˆMyBatis-Plusï¼‰
// æ–¹æ¡ˆ1ï¼šç»§æ‰¿ BaseMapperï¼Œç”¨æ¡ä»¶æ„é€ å™¨
userMapper.

selectOne(new QueryWrapper<User>().

eq("username",username));

// æ–¹æ¡ˆ2ï¼šè‡ªå®šä¹‰æ–¹æ³•ï¼ˆä»ä½¿ç”¨æ–¹æ³•åï¼‰
Optional<User> findByUsername(String username); // Plus ä¹Ÿæ”¯æŒï¼
```

**å·¥ä½œé‡**ï¼šâ­â­â­â­ï¼ˆæœ€ç®€å•ï¼‰

---

#### è¿ç§»åˆ° MyBatis-Flex

```java
// è¿ç§»åï¼ˆMyBatis-Flexï¼‰

import static com.github.loadup.modules.upms.entity.table.UserTableDef.USER;

userMapper.selectOneByQuery(
        QueryWrapper.create().

where(USER.USERNAME.eq(username))
        );
```

**å·¥ä½œé‡**ï¼šâ­â­â­ï¼ˆéœ€è¦å­¦ä¹ æ–° APIï¼‰

---

### 8.2 è¿ç§»æ—¶é—´ä¼°ç®—

| é¡¹ç›®è§„æ¨¡  | MyBatis åŸç”Ÿ | MyBatis-Plus | MyBatis-Flex |
|-------|------------|--------------|--------------|
| 10ä¸ªè¡¨  | 3å¤©         | 1å¤©           | 2å¤©           |
| 50ä¸ªè¡¨  | 2å‘¨         | 3å¤©           | 1å‘¨           |
| 100ä¸ªè¡¨ | 1ä¸ªæœˆ        | 1å‘¨           | 2å‘¨           |

**ç»“è®º**ï¼šMyBatis-Plus è¿ç§»æœ€å¿«

---

## ä¹ã€æŠ€æœ¯å€ºåŠ¡é£é™©

### 9.1 ç‰ˆæœ¬å‡çº§é£é™©

| æ¡†æ¶           | å‡çº§é¢‘ç‡    | ç ´åæ€§å˜æ›´ | é£é™©è¯„çº§   |
|--------------|---------|-------|--------|
| MyBatis      | ä½ï¼ˆç¨³å®šï¼‰   | å°‘     | â­ ä½    |
| MyBatis-Plus | ä¸­ç­‰      | å¶å°”æœ‰   | â­â­ ä¸­ä½  |
| MyBatis-Flex | é«˜ï¼ˆå¿«é€Ÿè¿­ä»£ï¼‰ | å¯èƒ½æœ‰   | â­â­â­ ä¸­ç­‰ |

### 9.2 ä¾èµ–ç®¡ç†

#### MyBatis-Plus ä¾èµ–

```xml
<!-- æ ¸å¿ƒä¾èµ– -->
<dependency>
    <groupId>com.baomidou</groupId>
    <artifactId>mybatis-plus-boot-starter</artifactId>
    <version>3.5.5</version>
</dependency>

        <!-- ä»£ç ç”Ÿæˆå™¨ï¼ˆå¯é€‰ï¼‰ -->
<dependency>
<groupId>com.baomidou</groupId>
<artifactId>mybatis-plus-generator</artifactId>
<version>3.5.5</version>
</dependency>
```

**ä¾èµ–æ•°é‡**ï¼š2 ä¸ª  
**ä¼ é€’ä¾èµ–**ï¼šMyBatisã€JDBC ç­‰ï¼ˆæ— é¢å¤–ä¾èµ–ï¼‰

---

#### MyBatis-Flex ä¾èµ–

```xml

<dependency>
    <groupId>com.mybatis-flex</groupId>
    <artifactId>mybatis-flex-spring-boot-starter</artifactId>
    <version>1.7.8</version>
</dependency>
```

**ä¾èµ–æ•°é‡**ï¼š1 ä¸ª  
**ä¼ é€’ä¾èµ–**ï¼šæ›´å°‘ï¼Œæ›´è½»é‡

---

## åã€æ€§èƒ½æ·±åº¦å¯¹æ¯”

### 10.1 å¯åŠ¨æ€§èƒ½

```
æµ‹è¯•ç¯å¢ƒï¼š50ä¸ªMapperï¼Œ200ä¸ªæ–¹æ³•

MyBatis åŸç”Ÿï¼š      1.2s
MyBatis-Plusï¼š      1.5s  (+25%)
MyBatis-Flexï¼š      1.3s  (+8%)
```

**ç»“è®º**ï¼šFlex æ›´è½»é‡ï¼ŒPlus åŠŸèƒ½å¤šå¯¼è‡´å¯åŠ¨æ…¢ä¸€ç‚¹

---

### 10.2 è¿è¡Œæ—¶æ€§èƒ½

#### ç®€å•æŸ¥è¯¢ï¼ˆQPSï¼‰

```
SELECT * FROM user WHERE id = ?

MyBatis åŸç”Ÿï¼š      50,000 QPS
MyBatis-Plusï¼š      48,000 QPS (-4%)
MyBatis-Flexï¼š      51,000 QPS (+2%)
```

#### å¤æ‚æ¡ä»¶æŸ¥è¯¢ï¼ˆQPSï¼‰

```
åŠ¨æ€æ¡ä»¶ï¼ˆ5ä¸ªå­—æ®µï¼‰

MyBatis åŸç”Ÿï¼ˆXMLï¼‰ï¼š 45,000 QPS
MyBatis-Plusï¼š        40,000 QPS (-11%)
MyBatis-Flexï¼š        43,000 QPS (-4%)
```

**ç»“è®º**ï¼šæ€§èƒ½å·®å¼‚åœ¨ 10% ä»¥å†…ï¼Œå®é™…é¡¹ç›®ä¸­ç“¶é¢ˆé€šå¸¸æ˜¯ä¸šåŠ¡é€»è¾‘å’Œæ•°æ®åº“ï¼Œä¸æ˜¯æ¡†æ¶

---

## åä¸€ã€æœ€ç»ˆæ¨è

### ç»¼åˆè¯„åˆ†

| ç»´åº¦     | æƒé‡       | MyBatis  | MyBatis-Plus | MyBatis-Flex |
|--------|----------|----------|--------------|--------------|
| å¼€å‘æ•ˆç‡   | 25%      | 3        | 5            | 4            |
| å­¦ä¹ æˆæœ¬   | 20%      | 3        | 5            | 4            |
| ç¤¾åŒºç”Ÿæ€   | 15%      | 5        | 5            | 2            |
| åŠŸèƒ½å®Œæ•´   | 15%      | 3        | 5            | 4            |
| æ€§èƒ½è¡¨ç°   | 10%      | 5        | 4            | 5            |
| ä»£ç ä¼˜é›…   | 10%      | 3        | 4            | 5            |
| é•¿æœŸç¨³å®š   | 5%       | 5        | 4            | 3            |
| **æ€»åˆ†** | **100%** | **3.55** | **4.7**      | **3.8**      |

### æ¨èå†³ç­–

#### ğŸ¥‡ é¦–é€‰ï¼šMyBatis-Plus â­â­â­â­â­

**ç†ç”±**ï¼š

1. âœ… åŠŸèƒ½æœ€å®Œæ•´ï¼ˆå¤šç§Ÿæˆ·ã€é€»è¾‘åˆ é™¤å¼€ç®±å³ç”¨ï¼‰
2. âœ… å¼€å‘æ•ˆç‡æœ€é«˜ï¼ˆå‡å°‘ 80% ä»£ç ï¼‰
3. âœ… å­¦ä¹ æˆæœ¬æœ€ä½ï¼ˆæ–‡æ¡£ä¸°å¯Œï¼‰
4. âœ… ç¤¾åŒºæœ€æ´»è·ƒï¼ˆé—®é¢˜å¥½è§£å†³ï¼‰
5. âœ… å¤§å‚èƒŒä¹¦ï¼ˆç¨³å®šå¯é ï¼‰

**é€‚åˆ**ï¼š

- è¿½æ±‚å¼€å‘æ•ˆç‡
- éœ€è¦å¿«é€Ÿäº¤ä»˜
- å›¢é˜Ÿæ–°æ‰‹å¤š
- **æœ¬é¡¹ç›®ï¼ˆLoadUp Frameworkï¼‰æ¨è â­â­â­â­â­**

---

#### ğŸ¥ˆ å¤‡é€‰ï¼šMyBatis-Flex â­â­â­â­

**ç†ç”±**ï¼š

1. âœ… ç±»å‹å®‰å…¨ï¼ˆç¼–è¯‘æ—¶æ£€æŸ¥ï¼‰
2. âœ… ä»£ç æœ€ä¼˜é›…
3. âœ… æ€§èƒ½æœ€å¥½
4. âœ… è½»é‡çº§

**é€‚åˆ**ï¼š

- å›¢é˜Ÿæ„¿æ„å°é²œ
- è¿½æ±‚ä»£ç è´¨é‡
- å¤æ‚ JOIN å¤š
- æ€§èƒ½è¦æ±‚é«˜

**é£é™©**ï¼š

- âš ï¸ ç¤¾åŒºè¾ƒå°
- âš ï¸ èµ„æ–™å°‘
- âš ï¸ é•¿æœŸç¨³å®šæ€§å¾…è§‚å¯Ÿ

---

#### ğŸ¥‰ ä¿å®ˆé€‰æ‹©ï¼šMyBatis åŸç”Ÿ â­â­â­

**ç†ç”±**ï¼š

1. âœ… æœ€ç¨³å®š
2. âœ… å®Œå…¨æ§åˆ¶
3. âœ… ç¤¾åŒºæœ€æˆç†Ÿ

**é€‚åˆ**ï¼š

- è¿½æ±‚æè‡´æ€§èƒ½
- å®Œå…¨æ§åˆ¶ SQL
- ä¸æƒ³è¦"é»‘é­”æ³•"

**ç¼ºç‚¹**ï¼š

- âŒ ä»£ç é‡å¤§
- âŒ å¼€å‘æ•ˆç‡ä½
- âŒ éœ€è¦æ‰‹å†™å¤šç§Ÿæˆ·æ‹¦æˆªå™¨

---

## åäºŒã€å®æ–½å»ºè®®

### é˜¶æ®µ1ï¼šé€‰å‹å†³ç­–ï¼ˆæœ¬å‘¨ï¼‰

```
å†³ç­–å› ç´ ï¼š
1. å›¢é˜ŸæŠ€æœ¯æ ˆåå¥½ï¼Ÿ
   - ä¿å®ˆ â†’ MyBatis åŸç”Ÿ
   - ä¸­åº¸ â†’ MyBatis-Plus âœ…
   - æ¿€è¿› â†’ MyBatis-Flex

2. å¼€å‘æ•ˆç‡ vs ä»£ç ä¼˜é›…ï¼Ÿ
   - æ•ˆç‡ä¼˜å…ˆ â†’ MyBatis-Plus âœ…
   - ä¼˜é›…ä¼˜å…ˆ â†’ MyBatis-Flex

3. å­¦ä¹ æˆæœ¬æ¥å—åº¦ï¼Ÿ
   - ä½æˆæœ¬ â†’ MyBatis-Plus âœ…
   - å¯æ¥å— â†’ MyBatis-Flex
```

### é˜¶æ®µ2ï¼šPOC éªŒè¯ï¼ˆ1å‘¨ï¼‰

```
ä»»åŠ¡ï¼š
- [ ] æ­å»º MyBatis-Plus/Flex POC
- [ ] å®ç°å¤šç§Ÿæˆ·æ‹¦æˆªå™¨
- [ ] å®ç°é€»è¾‘åˆ é™¤
- [ ] æ€§èƒ½æµ‹è¯•
- [ ] ä»£ç é£æ ¼è¯„ä¼°
```

### é˜¶æ®µ3ï¼šè¿ç§»è®¡åˆ’ï¼ˆ2-4å‘¨ï¼‰

```
Week 1: åŸºç¡€è®¾æ–½
  - æ·»åŠ ä¾èµ–
  - é…ç½®æ‹¦æˆªå™¨
  - ç”Ÿæˆ Mapper

Week 2-3: è¿ç§»ä»£ç 
  - ç®€å• CRUD ä¼˜å…ˆ
  - å¤æ‚æŸ¥è¯¢å…¶æ¬¡
  - ä¿ç•™éƒ¨åˆ† JDBCï¼ˆæ¸è¿›ï¼‰

Week 4: æµ‹è¯•éªŒè¯
  - å•å…ƒæµ‹è¯•
  - é›†æˆæµ‹è¯•
  - æ€§èƒ½æµ‹è¯•
```

---

## ç»“è®º

### é—®é¢˜å›é¡¾

**é—®é¢˜**ï¼šåº”è¯¥é€‰æ‹© MyBatisã€MyBatis-Plus è¿˜æ˜¯ MyBatis-Flexï¼Ÿ

### ç­”æ¡ˆ

**æ¨èé¡ºåº**ï¼š

1. ğŸ¥‡ **MyBatis-Plus**ï¼ˆç»¼åˆæœ€ä¼˜ï¼‰
2. ğŸ¥ˆ MyBatis-Flexï¼ˆè¿½æ±‚æè‡´ï¼‰
3. ğŸ¥‰ MyBatis åŸç”Ÿï¼ˆä¿å®ˆç¨³å¦¥ï¼‰

### å¯¹äº LoadUp Framework é¡¹ç›®

**å¼ºçƒˆæ¨èï¼šMyBatis-Plus** â­â­â­â­â­

**ç†ç”±æ€»ç»“**ï¼š

- âœ… å¤šç§Ÿæˆ·æ’ä»¶æˆç†Ÿ
- âœ… é€»è¾‘åˆ é™¤å¼€ç®±å³ç”¨
- âœ… å¼€å‘æ•ˆç‡æœ€é«˜
- âœ… å­¦ä¹ æˆæœ¬æœ€ä½
- âœ… ç¤¾åŒºæ”¯æŒæœ€å¥½
- âœ… å¤§å‚éªŒè¯å¯é 

**å†³ç­–è·¯å¾„**ï¼š

```
ç«‹å³ â†’ é€‰æ‹© MyBatis-Plus
çŸ­æœŸ â†’ POC éªŒè¯ï¼ˆ1å‘¨ï¼‰
ä¸­æœŸ â†’ æ¸è¿›è¿ç§»ï¼ˆ2-3å‘¨ï¼‰
é•¿æœŸ â†’ æŒç»­ä¼˜åŒ–
```

---

**æ–‡æ¡£ç”Ÿæˆæ—¶é—´**ï¼š2026-01-04 17:15  
**çŠ¶æ€**ï¼šçº¯æ¢è®¨ï¼Œæœªå®æ–½  
**ä¸‹ä¸€æ­¥**ï¼šå›¢é˜Ÿå†³ç­–åå¼€å§‹ POC

ğŸ“‹ **è¿™æ˜¯çº¯æ¢è®¨æ–‡æ¡£ï¼Œä¸æ¶‰åŠä»»ä½•ä»£ç å®æ–½**

