# LoadUp Database Component Configuration Example

# Database configuration
loadup:
  database:
    # ID Generator configuration
    id-generator:
      # Enable/disable automatic ID generation
      enabled: true

      # ID generation strategy
      # Available strategies:
      #   - random: Random string (default)
      #   - uuid-v4 (or uuid, uuidv4): Standard UUID v4
      #   - uuid-v7 (or uuidv7): Time-ordered UUID v7 (recommended for ordering)
      #   - snowflake: Snowflake algorithm (recommended for distributed systems)
      strategy: random

      # Length of generated ID (for random strategy only)
      length: 20

      # Whether to keep hyphens in UUID (for uuid-v4 and uuid-v7)
      # true: 550e8400-e29b-41d4-a716-446655440000
      # false: 550e8400e29b41d4a716446655440000
      uuid-with-hyphens: false

      # Snowflake worker ID (0-31, for snowflake strategy)
      # Each application instance should have a unique worker ID
      snowflake-worker-id: 0

      # Snowflake datacenter ID (0-31, for snowflake strategy)
      # Each datacenter should have a unique datacenter ID
      snowflake-datacenter-id: 0

    # Sequence configuration
    sequence:
      # Step size for sequence range allocation (how many IDs to pre-allocate)
      step: 1000
      # Minimum value for sequences
      min-value: 0
      # Maximum value for sequences
      max-value: 9223372036854775807

    # Multi-Tenant configuration
    multi-tenant:
      # Enable multi-tenant support (default: false)
      # When enabled, all queries will be automatically filtered by tenant_id
      enabled: true

      # Column name for tenant ID in database tables (default: tenant_id)
      column-name: tenant_id

      # Tables to ignore tenant filtering (comma separated)
      # These tables will not have automatic tenant_id filtering applied
      ignore-tables: sys_tenant,sys_user,sys_role,sys_permission,sys_config,sys_dict

      # Default tenant ID when no tenant context is set
      default-tenant-id: default

    # Logical Delete configuration
    logical-delete:
      # Enable logical delete (soft delete) support (default: false)
      # When enabled, DELETE operations will update the deleted flag instead of removing records
      enabled: true

      # Column name for logical delete flag (default: deleted)
      column-name: deleted

      # Value representing deleted records (default: true)
      # Can be: true, false, 1, 0, or any string value
      deleted-value: "true"

      # Value representing normal (not deleted) records (default: false)
      normal-value: "false"

# Spring Data JDBC configuration
spring:
  data:
    jdbc:
      repositories:
        # Enable JDBC repositories
        enabled: true

# DataSource configuration (example for MySQL)
spring:
  datasource:
    url: jdbc:mysql://localhost:3306/your_database?useUnicode=true&characterEncoding=utf8&useSSL=false&serverTimezone=UTC
    username: your_username
    password: your_password
    driver-class-name: com.mysql.cj.jdbc.Driver
    hikari:
      minimum-idle: 5
      maximum-pool-size: 20
      connection-timeout: 30000
      idle-timeout: 600000
      max-lifetime: 1800000

# Logging configuration (optional)
logging:
  level:
    io.github.loadup.components.database: DEBUG
    org.springframework.data.jdbc: DEBUG

