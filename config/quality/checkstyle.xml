<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE module PUBLIC
        "-//Checkstyle//DTD Checkstyle Configuration 1.3//EN"
        "https://checkstyle.org/dtds/configuration_1_3.dtd">
<!--
  Checkstyle 配置 - LoadUp 项目
  基于 Google Java Style，适配 Palantir 格式化风格
  文档: https://checkstyle.sourceforge.io/checks.html
-->
<module name="Checker">
    <property name="charset" value="UTF-8"/>
    <property name="severity" value="warning"/>
    <property name="fileExtensions" value="java"/>

    <!-- 排除生成的代码目录 -->
    <module name="BeforeExecutionExclusionFileFilter">
        <property name="fileNamePattern" value=".*[\\/]target[\\/].*"/>
    </module>
    <module name="BeforeExecutionExclusionFileFilter">
        <property name="fileNamePattern" value=".*[\\/]generated-sources[\\/].*"/>
    </module>

    <!-- 文件长度检查 -->
    <module name="FileLength">
        <property name="max" value="1500"/>
    </module>

    <!-- 文件末尾换行 -->
    <module name="NewlineAtEndOfFile"/>

    <!-- Tab 字符检查（使用空格） -->
    <module name="FileTabCharacter">
        <property name="eachLine" value="true"/>
    </module>

    <module name="TreeWalker">

        <!-- ===== 导入检查 ===== -->
        <module name="UnusedImports"/>
        <module name="RedundantImport"/>
        <module name="IllegalImport">
            <!-- 禁止直接使用 sun.* 内部 API -->
            <property name="illegalPkgs" value="sun, com.sun"/>
        </module>

        <!-- ===== 命名规范 ===== -->
        <module name="ConstantName"/>
        <module name="LocalVariableName"/>
        <module name="MemberName"/>
        <module name="MethodName"/>
        <module name="PackageName">
            <property name="format" value="^[a-z]+(\.[a-z][a-z0-9]*)*$"/>
        </module>
        <module name="ParameterName"/>
        <module name="StaticVariableName"/>
        <module name="TypeName"/>

        <!-- ===== 代码块 ===== -->
        <module name="EmptyBlock">
            <property name="option" value="TEXT"/>
            <property name="tokens" value="LITERAL_WHILE, LITERAL_TRY, LITERAL_FINALLY,
                LITERAL_DO, LITERAL_IF, LITERAL_ELSE, LITERAL_FOR,
                INSTANCE_INIT, STATIC_INIT, LITERAL_SWITCH, LITERAL_SYNCHRONIZED"/>
        </module>
        <module name="NeedBraces"/>
        <module name="LeftCurly"/>
        <module name="RightCurly"/>

        <!-- ===== 设计约束 ===== -->
        <!-- 禁止字段级 @Autowired（必须使用构造器注入） -->
        <module name="VisibilityModifier">
            <property name="packageAllowed" value="false"/>
            <property name="protectedAllowed" value="true"/>
            <property name="allowPublicFinalFields" value="true"/>
            <property name="allowPublicImmutableFields" value="true"/>
            <property name="ignoreAnnotationCanonicalNames"
                      value="org.springframework.beans.factory.annotation.Autowired,
                             org.springframework.beans.factory.annotation.Value,
                             com.fasterxml.jackson.annotation.JsonIgnore,
                             lombok.Getter,
                             lombok.Setter"/>
        </module>

        <!-- ===== 修饰符 ===== -->
        <module name="ModifierOrder"/>
        <module name="RedundantModifier"/>

        <!-- ===== 代码质量 ===== -->
        <module name="EmptyStatement"/>
        <module name="EqualsHashCode"/>
        <module name="SimplifyBooleanExpression"/>
        <module name="SimplifyBooleanReturn"/>
        <module name="StringLiteralEquality"/>
        <module name="SuperClone"/>
        <module name="SuperFinalize"/>
        <module name="IllegalCatch">
            <property name="illegalClassNames" value="java.lang.Error, java.lang.Throwable"/>
        </module>
        <module name="IllegalThrows"/>
        <module name="PackageDeclaration"/>
        <module name="DefaultComesLast"/>
        <module name="FallThrough"/>
        <module name="MultipleVariableDeclarations"/>
        <module name="UnnecessaryParentheses"/>

        <!-- ===== 长度限制 ===== -->
        <module name="MethodLength">
            <property name="max" value="150"/>
        </module>
        <module name="ParameterNumber">
            <property name="max" value="10"/>
        </module>

        <!-- ===== 空白检查 ===== -->
        <module name="GenericWhitespace"/>
        <module name="MethodParamPad"/>
        <module name="NoWhitespaceAfter"/>
        <module name="NoWhitespaceBefore"/>
        <module name="WhitespaceAround">
            <property name="allowEmptyConstructors" value="true"/>
            <property name="allowEmptyMethods" value="true"/>
            <property name="allowEmptyTypes" value="true"/>
            <property name="allowEmptyLoops" value="true"/>
        </module>

    </module>
</module>

